<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Armotek Catalog</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root {
--bg:#121212;--card:#1e1e1e;--text:#fff;--accent:#D4AF37;--muted:#999;
}
body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system}
.header{padding:14px;background:var(--card);text-align:center;position:sticky;top:0}
.logo{color:var(--accent);font-weight:700;font-size:18px}
.filters{display:flex;gap:8px;justify-content:center;margin-top:8px}
.filter-btn{border:1px solid var(--accent);background:none;color:var(--accent);padding:6px 14px;border-radius:20px}
.filter-btn.active{background:var(--accent);color:#000}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:10px}
.card{background:var(--card);border-radius:10px;overflow:hidden}
.card-img{height:110px;background:#333}
.card-body{padding:10px}
.add-btn{margin-top:6px;width:100%;padding:6px;background:var(--accent);border:none;border-radius:6px;font-weight:600}
.view{display:none;padding-bottom:80px}
.view.active{display:block}
.bottom-nav{position:fixed;bottom:0;width:100%;background:var(--card);display:flex;justify-content:space-around;padding:8px 0}
.nav-item{font-size:11px;color:var(--muted)}
.nav-item.active{color:var(--accent)}
.delivery-box{background:var(--card);margin:10px;border-radius:10px;padding:10px}
.delivery-box select{width:100%;padding:6px;margin:6px 0;background:#000;color:#fff;border:1px solid #333}
.note{font-size:11px;color:var(--muted);margin-top:6px}
</style>
</head>

<body>

<div class="header">
<div class="logo">ARMOTEK FILMS</div>
<div class="filters">
<button class="filter-btn active" onclick="filterBrand('all',this)">–í—Å–µ</button>
<button class="filter-btn" onclick="filterBrand('NAR',this)">NAR</button>
<button class="filter-btn" onclick="filterBrand('Crystal',this)">Crystal</button>
</div>
</div>

<div id="catalog" class="view active">
<div class="grid" id="grid"></div>
</div>

<div id="cart" class="view">
<h3 style="padding:10px">–ö–æ—Ä–∑–∏–Ω–∞</h3>
<div id="cart-items" style="padding:10px"></div>

<div class="delivery-box">
<select id="city" onchange="updateDelivery()">
<option>–ú–æ—Å–∫–≤–∞</option>
<option>–°–ü–±</option>
<option>–†–µ–≥–∏–æ–Ω—ã</option>
</select>

<select id="type" onchange="updateDelivery()">
<option value="courier">–ö—É—Ä—å–µ—Ä</option>
<option value="cdek">–°–î–≠–ö</option>
<option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
</select>

<select id="date" onchange="updateDelivery()"></select>
<select id="time"></select>

<div class="note" id="delivery-note"></div>
</div>

<button class="add-btn" onclick="sendOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<div class="bottom-nav">
<div class="nav-item active" onclick="switchTab('catalog',this)">üì¶<br>–ö–∞—Ç–∞–ª–æ–≥</div>
<div class="nav-item" onclick="switchTab('cart',this)">üõí<br>–ö–æ—Ä–∑–∏–Ω–∞</div>
</div>

<script>
(function(){
var tg=window.Telegram?Telegram.WebApp:null;if(tg)tg.expand();

var products=[
{id:1,brand:'NAR',name:'N190',size:1},
{id:2,brand:'NAR',name:'N190 (–æ—Ç—Ä–µ–∑)',size:1},
{id:3,brand:'Crystal',name:'Crystal 215',size:2}
];
var cart=[];

window.filterBrand=function(b,el){
var btns=document.getElementsByClassName('filter-btn');
for(var i=0;i<btns.length;i++)btns[i].classList.remove('active');
el.classList.add('active');
render(b);
}

function render(f){
var g=document.getElementById('grid');g.innerHTML='';
for(var i=0;i<products.length;i++){
var p=products[i];if(f!='all'&&p.brand!=f)continue;
g.innerHTML+=
'<div class="card"><div class="card-img"></div><div class="card-body"><b>'+p.name+
'</b><button class="add-btn" onclick="add('+p.id+')">–í –∫–æ—Ä–∑–∏–Ω—É</button></div></div>';
}
}

window.add=function(id){
for(var i=0;i<products.length;i++)if(products[i].id==id)cart.push(products[i]);
updateCart();updateDelivery();
}

function updateCart(){
var c=document.getElementById('cart-items');c.innerHTML='';
for(var i=0;i<cart.length;i++)c.innerHTML+='<div>'+cart[i].name+'</div>';
}

function bigOrder(){
var s=0;for(var i=0;i<cart.length;i++)s+=cart[i].size;return s>=3;
}

window.updateDelivery=function(){
var type=document.getElementById('type').value;
var date=document.getElementById('date');
var time=document.getElementById('time');
var note=document.getElementById('delivery-note');
date.innerHTML='';time.innerHTML='';note.innerHTML='';

var today=new Date();
for(var i=0;i<5;i++){
var d=new Date();d.setDate(today.getDate()+i);
if(bigOrder()&&i==0)continue;
date.add(new Option(d.toLocaleDateString('ru-RU'),d.toISOString()));
}

if(type=='pickup'){time.add(new Option('10:00‚Äì18:00','all'));return;}
if(type=='cdek'){time.add(new Option('–ü–µ—Ä–µ–¥–∞—á–∞ –≤ –¢–ö','cdek'));return;}

time.add(new Option('10:00‚Äì14:00','10-14'));
if(!bigOrder())time.add(new Option('14:00‚Äì18:00','14-18'));
else note.innerHTML='–°—Ä–æ—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∑–∞–∫–∞–∑–∞';
}

window.switchTab=function(id,el){
var v=document.getElementsByClassName('view');
for(var i=0;i<v.length;i++)v[i].classList.remove('active');
document.getElementById(id).classList.add('active');
var n=document.getElementsByClassName('nav-item');
for(var j=0;j<n.length;j++)n[j].classList.remove('active');
el.classList.add('active');
}

window.sendOrder=function(){
var data={
cart:cart,
city:city.value,
type:type.value,
date:date.value,
time:time.value
};
if(tg)tg.sendData(JSON.stringify(data));
alert('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
}

render('all');updateDelivery();
})();
</script>

</body>
</html>
