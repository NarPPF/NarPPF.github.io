<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Armotek Catalog</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
/* === –°–¢–ò–õ–ò –ù–ï –¢–†–û–ù–£–¢–´ === */
:root {
--bg-color:#121212;--card-bg:#1e1e1e;--text-color:#fff;
--accent-color:#D4AF37;--secondary-text:#a0a0a0;
}
body{background:var(--bg-color);color:var(--text-color);margin:0;padding-bottom:80px;font-family:-apple-system}
.header{padding:15px;background:var(--card-bg);text-align:center;position:sticky;top:0}
.logo{color:var(--accent-color);font-weight:bold}
.filters{display:flex;gap:10px;justify-content:center}
.filter-btn{border:1px solid var(--accent-color);background:none;color:var(--accent-color);border-radius:20px;padding:8px}
.filter-btn.active{background:var(--accent-color);color:#000}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:10px}
.card{background:var(--card-bg);border-radius:10px;overflow:hidden}
.card-img{height:120px;background:#333}
.card-body{padding:10px}
.add-btn{background:var(--accent-color);border:none;width:100%;padding:8px;border-radius:5px;font-weight:bold}
.view{display:none;padding:10px}
.view.active{display:block}
.bottom-nav{position:fixed;bottom:0;width:100%;background:var(--card-bg);display:flex;justify-content:space-around}
.nav-item{font-size:10px;text-align:center;color:var(--secondary-text)}
.nav-item.active{color:var(--accent-color)}
</style>
</head>

<body>

<div class="header">
<div class="logo">ARMOTEK FILMS</div>
<div id="city-selector">–ú–æ—Å–∫–≤–∞ ‚ñº</div>
<div class="filters">
<button class="filter-btn active" onclick="filterBrand('all',this)">–í—Å–µ</button>
<button class="filter-btn" onclick="filterBrand('NAR',this)">NAR</button>
<button class="filter-btn" onclick="filterBrand('Crystal',this)">Crystal</button>
</div>
</div>

<div id="catalog-view" class="view active">
<div class="grid" id="product-grid"></div>
</div>

<div id="cart-view" class="view">
<h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
<div id="cart-items"></div>
<button onclick="startCheckout()">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
</div>

<div id="profile-view" class="view">
<h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
<div id="order-history"></div>
</div>

<div id="checkout-view" class="view">
<h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h3>
<input id="cust-name" placeholder="–ò–º—è">
<input id="cust-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
<button onclick="submitOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
</div>

<div class="bottom-nav">
<div class="nav-item active" onclick="switchTab('catalog-view',this)">üìÇ –ö–∞—Ç–∞–ª–æ–≥</div>
<div class="nav-item" onclick="switchTab('cart-view',this)">üõí –ö–æ—Ä–∑–∏–Ω–∞</div>
<div class="nav-item" onclick="switchTab('profile-view',this)">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

/* === DATA === */
const products=[
{id:1,brand:'NAR',name:'–ù190',unit:'—Ä—É–ª'},
{id:2,brand:'Crystal',name:'Crystal Matte',unit:'—Ä—É–ª'}
];

let cart=[];

/* === INIT === */
loadCart();
renderCatalog('all');
renderHistory();

/* === CATALOG === */
function filterBrand(b,btn){
document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));
btn.classList.add('active');
renderCatalog(b);
}

function renderCatalog(f){
const g=document.getElementById('product-grid');
g.innerHTML='';
products.forEach(p=>{
if(f!=='all'&&p.brand!==f)return;
g.innerHTML+=`
<div class="card">
<div class="card-img"></div>
<div class="card-body">
<b>${p.name}</b><br>
<button class="add-btn" onclick="addToCart(${p.id})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
</div></div>`;
});
}

/* === CART === */
function addToCart(id){
const p=products.find(x=>x.id===id);
const e=cart.find(x=>x.id===id);
e?e.qty++:cart.push({...p,qty:1});
saveCart(); alert('–î–æ–±–∞–≤–ª–µ–Ω–æ');
}

function renderCart(){
const c=document.getElementById('cart-items');
c.innerHTML='';
cart.forEach(i=>{
c.innerHTML+=`<div>${i.name} x${i.qty}</div>`;
});
}

function saveCart(){localStorage.setItem('cart',JSON.stringify(cart))}
function loadCart(){cart=JSON.parse(localStorage.getItem('cart')||'[]')}

/* === CHECKOUT === */
function startCheckout(){switchTab('checkout-view')}

function submitOrder(){
if(!cart.length)return alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
const data={cart,customer:{
name: cust-name.value,
phone: cust-phone.value
}};
saveHistory(data);
cart=[]; saveCart();
tg.sendData(JSON.stringify(data));
alert('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
switchTab('catalog-view');
}

/* === HISTORY === */
function saveHistory(o){
const h=JSON.parse(localStorage.getItem('orders')||'[]');
h.unshift(o);
localStorage.setItem('orders',JSON.stringify(h));
}

function renderHistory(){
const h=JSON.parse(localStorage.getItem('orders')||'[]');
document.getElementById('order-history').innerHTML=
h.map(o=>`<div>${o.customer.name}</div>`).join('');
}

/* === NAV === */
function switchTab(id,el){
document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
document.getElementById(id).classList.add('active');
if(el){
document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
el.classList.add('active');
}
if(id==='cart-view')renderCart();
}
</script>
</body>
</html>
